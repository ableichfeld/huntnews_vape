<!DOCTYPE html>
<html>
  <head>
    <title>Cigarette and Vape use by Age Group</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
  </head>
  <body>
    <script>
      var width = 780;
      var height = 615;
      var margin = {top: 25, left: 55, right: 25, bottom: 245};

      var svg = d3.select("body")
        .append("svg")
        .attr("width",width)
        .attr("height",height);

      var data = [
          {x: "8th grade cigarette use", y: 2.2},
          {x: "8th grade vaping", y: 10.4},
          {x: "10th grade cigarette use", y: 4.2},
          {x: "10th grade vaping", y: 21.7},
          {x: "12th grade cigarette use", y: 7.6},
          {x: "12th grade vaping", y: 26.7},
          {x: "College students cigarette use", y: 6.8},
          {x: "College vaping", y: 21.3},
          {x: "Young adults cigarette use", y: 12.3},
          {x: "Young adults vaping", y: 17.1}
        ];

        var xScale = d3.scaleBand()
          .domain(["8th grade cigarette use","8th grade vaping","10th grade cigarette use","10th grade vaping","12th grade cigarette use","12th grade vaping","College students cigarette use","College vaping","Young adults cigarette use","Young adults vaping"])
          .rangeRound([margin.left, width-margin.right])
          .padding(0.25);

        var yScale = d3.scaleLinear()
          .domain([0,30])
          .range([height-margin.bottom, margin.top]);

        var xAxis = svg.append("g")
          .attr("transform",`translate(0,${height-margin.bottom})`)
          .call(d3.axisBottom().scale(xScale))
          .selectAll("text")
            .style("text-anchor", "end")
            .attr("dx","-.8em")
            .attr("dy",".15em")
            .attr("transform","rotate(-65)");

        var yAxis = svg.append("g")
          .attr("transform",`translate(${margin.left},0)`)
          .call(d3.axisLeft().scale(yScale));

        var tooltip = d3.select("body")
          .append("div")
          .attr("class", "tooltip")
          .style("position", "absolute")
          .style("z-index", "10")
          .style("visibility", "hidden");

        var bar = svg.selectAll("rect")
          .data(data)
          .enter()
          .append("rect")
            .attr("x",function(d) { return xScale(d.x); })
            .attr("y", function(d) { return yScale(d.y); })
            .attr("width",xScale.bandwidth())
            .attr("height", function(d) { return height - margin.bottom - yScale(d.y); })
            .attr("fill","#CC0000")
            .on("mouseover", function(d) {
              d3.select(this)
                .attr("fill","#800000");
                tooltip.style("visibility", "visible")
                  .text(`${d.y}%`);
            }).on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
            .on("mouseout", function() {
              d3.select(this)
                .attr("fill","#CC0000");
              return tooltip.style("visibility", "hidden");
            })

        var xLabel = svg.append("text")
          .attr("class","axisLabel")
          .attr("x",width/2)
          .attr("y",height-75)
          .attr("text-anchor","middle")
          .text("Age group");

        var yLabel = svg.append("text")
          .attr("class","axisLabel")
          .attr("transform","rotate(-90)")
          .attr("x",(-height+160)/2)
          .attr("y",20)
          .attr("text-anchor","middle")
          .text("30-day prevalence of use (%)");

        var collegeButton = svg.append("g")

        collegeButton.append("rect")
          .attr("x",100)
          .attr("y",height-55)
          .attr("width",100)
          .attr("height",50)
          .attr("fill","#CC0000")
          .attr("stroke","#bf4040")
          .attr("stroke-width",0)
          .on("mouseover",function(){
            d3.select(this)
              .attr("fill","#800000")
              .attr("stroke-width",3)
              .attr("border-left", "5px solid black;");
          }) .on("mouseout", function() {
            d3.select(this)
              .attr("fill","#CC0000")
              .attr("stroke-width",0);})
        collegeButton.append("text")
          .attr("x", 150)
          .attr("y", height-25)
          .attr("text-anchor","middle")
          .attr("fill","white")
          .text("College");












    </script>
  </body>
</html>
